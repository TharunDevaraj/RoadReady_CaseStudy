<div class="container col-md-4 mt-5 border rounded p-5 bg-light shadow mb-5">
<h2 class="text-center mb-4">Register</h2>
<form (ngSubmit)="onSubmit(registerForm)" #registerForm="ngForm">
<div class="form-group mb-3">
<label>Username</label>
<input class="form-control" type="text" name="userName" [(ngModel)]="user.userName" required minlength="3" maxlength="50" #userNameRef="ngModel">
<div class="text-danger" *ngIf="userNameRef.touched && userNameRef.invalid">
Username must be between 3 and 50 characters.
</div>
</div>
<div class="form-group mb-3">
<label>Email</label>
<input type="email" class="form-control" name="email" [(ngModel)]="user.email" email required #emailRef="ngModel">
<div class="text-danger" *ngIf="emailRef.touched && emailRef.invalid">
Enter a valid email.
</div>
</div>
<div class="form-group mb-3">
<label>Phone Number</label>
<input type="text" class="form-control" name="phoneNumber" required [(ngModel)]="user.phoneNumber" pattern="[0-9]{10}" #phoneRef="ngModel">
<div class="text-danger" *ngIf="phoneRef.touched && phoneRef.invalid">
Enter a 10-digit phone number.
</div>
</div>
<div class="form-group mb-3">
<label>Password</label>
<input type="password" [(ngModel)]="user.password" class="form-control" name="password" minlength="4" required #passwordRef="ngModel">
<div *ngIf="passwordRef.touched && passwordRef.invalid" class="text-danger">
Password must be at least 4 characters long.
</div>
</div>
<div class="form-group mb-4">
<label>Role</label>
<select [(ngModel)]="user.roles" name="roles" class="form-control" required #rolesRef="ngModel">
<option value="" disabled>-- Select Role --</option>
<option value="customer">Customer</option>
<option value="admin">Admin</option>
<option value="agent">Agent</option>
</select>
<div class="text-danger" *ngIf="rolesRef.touched && rolesRef.invalid">
Please select a role.
</div>
</div>
<div class="form-group mb-3" *ngIf="user.roles === 'admin'">
  <label>Admin Secret Key</label>
  <input type="password" class="form-control" name="adminKey" [(ngModel)]="user.adminKey" #adminKeyRef="ngModel" required>
  <div class="text-danger" *ngIf="adminKeyRef.touched && adminKeyRef.invalid">
    Admin key is required.
  </div>
</div>

<div class="text-center">
<button class="btn btn-success" type="submit" [disabled]="registerForm.invalid">Register</button>
</div>
</form>
<div class="alert alert-danger mt-3" *ngIf="errorMessage">{{ errorMessage }}</div>
</div>
